{"ast":null,"code":"import _objectSpread from\"/home/ahrorbek/Videos/ffmeal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ahrorbek/Videos/ffmeal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Container,Dates,Wrapper,Image,Title,Action,ImageText,Input}from\"./style\";import{data}from\"../../../mock/mahsulotlar\";import Delete from\"../../Generic/Delete\";import Edit from\"../../Generic/Edit\";import Cancel from\"../../Generic/Cancel\";import Save from\"../../Generic/Save\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DND=function DND(){var _useState=useState(data),_useState2=_slicedToArray(_useState,2),baza=_useState2[0],setBaza=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),categoriya=_useState4[0],setCategoriya=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),qoshimcha=_useState10[0],setQoshimcha=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selected=_useState12[0],setSelected=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),currentCard=_useState14[0],setCurrentCard=_useState14[1];var onDelete=function onDelete(value){var filtered=baza.filter(function(data){return data.id!==value.id;});setBaza(filtered);};var onEdit=function onEdit(value){setSelected(value.id);setTitle(value.title);setCategoriya(value.categoriya);setPrice(value.price);setQoshimcha(value.qoshimcha);};var dragStartHandler=function dragStartHandler(e,value){setCurrentCard(value);};var dragEndHandler=function dragEndHandler(e){e.target.style.background=\"white\";};var dragOverHandler=function dragOverHandler(e){e.preventDefault();e.target.style.background=\"lightgray\";};var dropHandler=function dropHandler(e,value){e.preventDefault();setBaza(baza.map(function(c){if(c.id===value.id){return _objectSpread(_objectSpread({},c),{},{order:currentCard.order});}if(c.id===currentCard.id){return _objectSpread(_objectSpread({},c),{},{order:value.order});}return c;}));e.target.style.background=\"white\";};var sortCards=function sortCards(a,b){if(a.order<b.order){return 1;}else{return-1;}};var onSave=function onSave(){var newData=baza.map(function(value){return value.id===selected?_objectSpread(_objectSpread({},value),{},{title:title,categoriya:categoriya,price:price,qoshimcha:qoshimcha,selected:value.id}):value;});setBaza(newData);setSelected(null);};return/*#__PURE__*/_jsx(Container,{children:baza.sort(sortCards).map(function(value){return/*#__PURE__*/_jsx(Wrapper,{onDragStart:function onDragStart(e){return dragStartHandler(e,value);},onDragLeave:function onDragLeave(e){return dragEndHandler(e);},onDragEnd:function onDragEnd(e){return dragEndHandler(e);},onDragOver:function onDragOver(e){return dragOverHandler(e);},onDrop:function onDrop(e){return dropHandler(e,value);},draggable:true,children:/*#__PURE__*/_jsxs(Dates,{children:[/*#__PURE__*/_jsxs(ImageText,{children:[/*#__PURE__*/_jsx(Image,{src:value.Img}),/*#__PURE__*/_jsx(Title,{left:\"true\",children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setTitle(e.target.value);},type:\"text\",value:title}):value.title})]}),/*#__PURE__*/_jsx(Title,{children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setCategoriya(e.target.value);},type:\"text\",value:categoriya}):value.categoriya}),/*#__PURE__*/_jsx(Title,{children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setPrice(e.target.value);},type:\"text\",value:price}):value.price+\"UZS\"}),/*#__PURE__*/_jsx(Title,{children:selected===value.id?/*#__PURE__*/_jsx(Input,{type:\"text\",onChange:function onChange(e){return setQoshimcha(e.target.value);},value:qoshimcha}):value.qoshimcha}),/*#__PURE__*/_jsxs(Action,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return onDelete(value);},children:/*#__PURE__*/_jsx(Delete,{})}),selected===value.id?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"div\",{onClick:onSave,children:/*#__PURE__*/_jsx(Save,{})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setSelected(null);},children:/*#__PURE__*/_jsx(Cancel,{})})]}):/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return onEdit(value);},children:/*#__PURE__*/_jsx(Edit,{})})]})]})},value.id);})});};export default DND;","map":{"version":3,"sources":["/home/ahrorbek/Videos/ffmeal/src/components/Mahsulotlar/DND2/index.jsx"],"names":["React","useState","Container","Dates","Wrapper","Image","Title","Action","ImageText","Input","data","Delete","Edit","Cancel","Save","DND","baza","setBaza","categoriya","setCategoriya","title","setTitle","price","setPrice","qoshimcha","setQoshimcha","selected","setSelected","currentCard","setCurrentCard","onDelete","value","filtered","filter","id","onEdit","dragStartHandler","e","dragEndHandler","target","style","background","dragOverHandler","preventDefault","dropHandler","map","c","order","sortCards","a","b","onSave","newData","sort","Img","display"],"mappings":"qSAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OACEC,SADF,CAEEC,KAFF,CAGEC,OAHF,CAIEC,KAJF,CAKEC,KALF,CAMEC,MANF,CAOEC,SAPF,CAQEC,KARF,KASO,SATP,CAUA,OAASC,IAAT,KAAqB,2BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,C,wFAEA,MAAO,IAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CACvB,cAAwBd,QAAQ,CAACS,IAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAAoChB,QAAQ,CAAC,EAAD,CAA5C,yCAAOiB,UAAP,eAAmBC,aAAnB,eACA,eAA0BlB,QAAQ,CAAC,EAAD,CAAlC,yCAAOmB,KAAP,eAAcC,QAAd,eACA,eAA0BpB,QAAQ,CAAC,EAAD,CAAlC,yCAAOqB,KAAP,eAAcC,QAAd,eACA,eAAkCtB,QAAQ,CAAC,EAAD,CAA1C,0CAAOuB,SAAP,gBAAkBC,YAAlB,gBACA,gBAAgCxB,QAAQ,CAAC,IAAD,CAAxC,2CAAOyB,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsC1B,QAAQ,CAAC,IAAD,CAA9C,2CAAO2B,WAAP,gBAAoBC,cAApB,gBACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1B,GAAMC,CAAAA,QAAQ,CAAGhB,IAAI,CAACiB,MAAL,CAAY,SAACvB,IAAD,QAAUA,CAAAA,IAAI,CAACwB,EAAL,GAAYH,KAAK,CAACG,EAA5B,EAAZ,CAAjB,CACAjB,OAAO,CAACe,QAAD,CAAP,CACD,CAHD,CAKA,GAAMG,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACJ,KAAD,CAAW,CACxBJ,WAAW,CAACI,KAAK,CAACG,EAAP,CAAX,CACAb,QAAQ,CAACU,KAAK,CAACX,KAAP,CAAR,CACAD,aAAa,CAACY,KAAK,CAACb,UAAP,CAAb,CACAK,QAAQ,CAACQ,KAAK,CAACT,KAAP,CAAR,CACAG,YAAY,CAACM,KAAK,CAACP,SAAP,CAAZ,CACD,CAND,CAOA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAIN,KAAJ,CAAc,CACrCF,cAAc,CAACE,KAAD,CAAd,CACD,CAFD,CAGA,GAAMO,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACD,CAAD,CAAO,CAC5BA,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,UAAf,CAA4B,OAA5B,CACD,CAFD,CAGA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACL,CAAD,CAAO,CAC7BA,CAAC,CAACM,cAAF,GACAN,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,UAAf,CAA4B,WAA5B,CACD,CAHD,CAIA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACP,CAAD,CAAIN,KAAJ,CAAc,CAChCM,CAAC,CAACM,cAAF,GACA1B,OAAO,CACLD,IAAI,CAAC6B,GAAL,CAAS,SAACC,CAAD,CAAO,CACd,GAAIA,CAAC,CAACZ,EAAF,GAASH,KAAK,CAACG,EAAnB,CAAuB,CACrB,sCAAYY,CAAZ,MAAeC,KAAK,CAAEnB,WAAW,CAACmB,KAAlC,GACD,CACD,GAAID,CAAC,CAACZ,EAAF,GAASN,WAAW,CAACM,EAAzB,CAA6B,CAC3B,sCAAYY,CAAZ,MAAeC,KAAK,CAAEhB,KAAK,CAACgB,KAA5B,GACD,CACD,MAAOD,CAAAA,CAAP,CACD,CARD,CADK,CAAP,CAWAT,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,UAAf,CAA4B,OAA5B,CACD,CAdD,CAeA,GAAMO,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,CAAD,CAAIC,CAAJ,CAAU,CAC1B,GAAID,CAAC,CAACF,KAAF,CAAUG,CAAC,CAACH,KAAhB,CAAuB,CACrB,MAAO,EAAP,CACD,CAFD,IAEO,CACL,MAAO,CAAC,CAAR,CACD,CACF,CAND,CAOA,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,GAAIC,CAAAA,OAAO,CAAGpC,IAAI,CAAC6B,GAAL,CAAS,SAACd,KAAD,QACrBA,CAAAA,KAAK,CAACG,EAAN,GAAaR,QAAb,gCAESK,KAFT,MAGMX,KAAK,CAAEA,KAHb,CAIMF,UAAU,CAAEA,UAJlB,CAKMI,KAAK,CAAEA,KALb,CAMME,SAAS,CAAEA,SANjB,CAOME,QAAQ,CAAEK,KAAK,CAACG,EAPtB,GASIH,KAViB,EAAT,CAAd,CAYAd,OAAO,CAACmC,OAAD,CAAP,CACAzB,WAAW,CAAC,IAAD,CAAX,CACD,CAfD,CAgBA,mBACE,KAAC,SAAD,WACGX,IAAI,CAACqC,IAAL,CAAUL,SAAV,EAAqBH,GAArB,CAAyB,SAACd,KAAD,qBACxB,KAAC,OAAD,EACE,WAAW,CAAE,qBAACM,CAAD,QAAOD,CAAAA,gBAAgB,CAACC,CAAD,CAAIN,KAAJ,CAAvB,EADf,CAEE,WAAW,CAAE,qBAACM,CAAD,QAAOC,CAAAA,cAAc,CAACD,CAAD,CAArB,EAFf,CAGE,SAAS,CAAE,mBAACA,CAAD,QAAOC,CAAAA,cAAc,CAACD,CAAD,CAArB,EAHb,CAIE,UAAU,CAAE,oBAACA,CAAD,QAAOK,CAAAA,eAAe,CAACL,CAAD,CAAtB,EAJd,CAKE,MAAM,CAAE,gBAACA,CAAD,QAAOO,CAAAA,WAAW,CAACP,CAAD,CAAIN,KAAJ,CAAlB,EALV,CAME,SAAS,CAAE,IANb,uBASE,MAAC,KAAD,yBACE,MAAC,SAAD,yBACE,KAAC,KAAD,EAAO,GAAG,CAAEA,KAAK,CAACuB,GAAlB,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,UACG5B,QAAQ,GAAKK,KAAK,CAACG,EAAnB,cACC,KAAC,KAAD,EACE,QAAQ,CAAE,kBAACG,CAAD,QAAOhB,CAAAA,QAAQ,CAACgB,CAAC,CAACE,MAAF,CAASR,KAAV,CAAf,EADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAEX,KAHT,EADD,CAOCW,KAAK,CAACX,KARV,EAFF,GADF,cAeE,KAAC,KAAD,WACGM,QAAQ,GAAKK,KAAK,CAACG,EAAnB,cACC,KAAC,KAAD,EACE,QAAQ,CAAE,kBAACG,CAAD,QAAOlB,CAAAA,aAAa,CAACkB,CAAC,CAACE,MAAF,CAASR,KAAV,CAApB,EADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAEb,UAHT,EADD,CAOCa,KAAK,CAACb,UARV,EAfF,cA0BE,KAAC,KAAD,WACGQ,QAAQ,GAAKK,KAAK,CAACG,EAAnB,cACC,KAAC,KAAD,EACE,QAAQ,CAAE,kBAACG,CAAD,QAAOd,CAAAA,QAAQ,CAACc,CAAC,CAACE,MAAF,CAASR,KAAV,CAAf,EADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAET,KAHT,EADD,CAOCS,KAAK,CAACT,KAAN,CAAc,KARlB,EA1BF,cAqCE,KAAC,KAAD,WACGI,QAAQ,GAAKK,KAAK,CAACG,EAAnB,cACC,KAAC,KAAD,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,kBAACG,CAAD,QAAOZ,CAAAA,YAAY,CAACY,CAAC,CAACE,MAAF,CAASR,KAAV,CAAnB,EAFZ,CAGE,KAAK,CAAEP,SAHT,EADD,CAOCO,KAAK,CAACP,SARV,EArCF,cAgDE,MAAC,MAAD,yBACE,YAAK,OAAO,CAAE,yBAAMM,CAAAA,QAAQ,CAACC,KAAD,CAAd,EAAd,uBACE,KAAC,MAAD,IADF,EADF,CAIGL,QAAQ,GAAKK,KAAK,CAACG,EAAnB,cACC,aAAK,KAAK,CAAE,CAAEqB,OAAO,CAAE,MAAX,CAAZ,wBACE,YAAK,OAAO,CAAEJ,MAAd,uBACE,KAAC,IAAD,IADF,EADF,cAIE,YAAK,OAAO,CAAE,yBAAMxB,CAAAA,WAAW,CAAC,IAAD,CAAjB,EAAd,uBACE,KAAC,MAAD,IADF,EAJF,GADD,cAUC,YAAK,OAAO,CAAE,yBAAMQ,CAAAA,MAAM,CAACJ,KAAD,CAAZ,EAAd,uBACE,KAAC,IAAD,IADF,EAdJ,GAhDF,GATF,EAOOA,KAAK,CAACG,EAPb,CADwB,EAAzB,CADH,EADF,CAoFD,CAxJM,CAyJP,cAAenB,CAAAA,GAAf","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Container,\n  Dates,\n  Wrapper,\n  Image,\n  Title,\n  Action,\n  ImageText,\n  Input,\n} from \"./style\";\nimport { data } from \"../../../mock/mahsulotlar\";\nimport Delete from \"../../Generic/Delete\";\nimport Edit from \"../../Generic/Edit\";\nimport Cancel from \"../../Generic/Cancel\";\nimport Save from \"../../Generic/Save\";\n\nexport const DND = () => {\n  const [baza, setBaza] = useState(data);\n  const [categoriya, setCategoriya] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [qoshimcha, setQoshimcha] = useState(\"\");\n  const [selected, setSelected] = useState(null);\n  const [currentCard, setCurrentCard] = useState(null);\n  const onDelete = (value) => {\n    const filtered = baza.filter((data) => data.id !== value.id);\n    setBaza(filtered);\n  };\n\n  const onEdit = (value) => {\n    setSelected(value.id);\n    setTitle(value.title);\n    setCategoriya(value.categoriya);\n    setPrice(value.price);\n    setQoshimcha(value.qoshimcha);\n  };\n  const dragStartHandler = (e, value) => {\n    setCurrentCard(value);\n  };\n  const dragEndHandler = (e) => {\n    e.target.style.background = \"white\";\n  };\n  const dragOverHandler = (e) => {\n    e.preventDefault();\n    e.target.style.background = \"lightgray\";\n  };\n  const dropHandler = (e, value) => {\n    e.preventDefault();\n    setBaza(\n      baza.map((c) => {\n        if (c.id === value.id) {\n          return { ...c, order: currentCard.order };\n        }\n        if (c.id === currentCard.id) {\n          return { ...c, order: value.order };\n        }\n        return c;\n      })\n    );\n    e.target.style.background = \"white\";\n  };\n  const sortCards = (a, b) => {\n    if (a.order < b.order) {\n      return 1;\n    } else {\n      return -1;\n    }\n  };\n  const onSave = () => {\n    let newData = baza.map((value) =>\n      value.id === selected\n        ? {\n            ...value,\n            title: title,\n            categoriya: categoriya,\n            price: price,\n            qoshimcha: qoshimcha,\n            selected: value.id,\n          }\n        : value\n    );\n    setBaza(newData);\n    setSelected(null);\n  };\n  return (\n    <Container>\n      {baza.sort(sortCards).map((value) => (\n        <Wrapper\n          onDragStart={(e) => dragStartHandler(e, value)}\n          onDragLeave={(e) => dragEndHandler(e)}\n          onDragEnd={(e) => dragEndHandler(e)}\n          onDragOver={(e) => dragOverHandler(e)}\n          onDrop={(e) => dropHandler(e, value)}\n          draggable={true}\n          key={value.id}\n        >\n          <Dates>\n            <ImageText>\n              <Image src={value.Img} />\n              <Title left=\"true\">\n                {selected === value.id ? (\n                  <Input\n                    onChange={(e) => setTitle(e.target.value)}\n                    type=\"text\"\n                    value={title}\n                  />\n                ) : (\n                  value.title\n                )}\n              </Title>\n            </ImageText>\n            <Title>\n              {selected === value.id ? (\n                <Input\n                  onChange={(e) => setCategoriya(e.target.value)}\n                  type=\"text\"\n                  value={categoriya}\n                />\n              ) : (\n                value.categoriya\n              )}\n            </Title>\n            <Title>\n              {selected === value.id ? (\n                <Input\n                  onChange={(e) => setPrice(e.target.value)}\n                  type=\"text\"\n                  value={price}\n                />\n              ) : (\n                value.price + \"UZS\"\n              )}\n            </Title>\n            <Title>\n              {selected === value.id ? (\n                <Input\n                  type=\"text\"\n                  onChange={(e) => setQoshimcha(e.target.value)}\n                  value={qoshimcha}\n                />\n              ) : (\n                value.qoshimcha\n              )}\n            </Title>\n            <Action>\n              <div onClick={() => onDelete(value)}>\n                <Delete />\n              </div>\n              {selected === value.id ? (\n                <div style={{ display: \"flex\" }}>\n                  <div onClick={onSave}>\n                    <Save />\n                  </div>\n                  <div onClick={() => setSelected(null)}>\n                    <Cancel />\n                  </div>\n                </div>\n              ) : (\n                <div onClick={() => onEdit(value)}>\n                  <Edit />\n                </div>\n              )}\n            </Action>\n          </Dates>\n        </Wrapper>\n      ))}\n    </Container>\n  );\n};\nexport default DND;\n"]},"metadata":{},"sourceType":"module"}