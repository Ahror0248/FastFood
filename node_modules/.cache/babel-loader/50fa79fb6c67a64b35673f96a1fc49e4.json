{"ast":null,"code":"import _objectSpread from\"/home/ahrorbek/Videos/ffmeal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ahrorbek/Videos/ffmeal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Container,Dates,Wrapper,Title,Action,ButtonAll,RestoreButton,Restore,RestoreIcon,Input}from\"./style\";import{data}from\"../../../mock/kategoriya\";import Delete from\"../../Generic/Delete\";import Edit from\"../../Generic/Edit\";import Cancel from\"../../Generic/Cancel\";import restoreIcon from\"../../../assets/icon/restoreIcon.svg\";import Save from\"../../Generic/Save\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DND=function DND(){var _useState=useState(data),_useState2=_slicedToArray(_useState,2),baza=_useState2[0],setBaza=_useState2[1];var _useState3=useState(data),_useState4=_slicedToArray(_useState3,1),restore=_useState4[0];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),main=_useState6[0],setMain=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),rutitle=_useState8[0],setRuTitle=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selected=_useState12[0],setSelected=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),currentCard=_useState14[0],setCurrentCard=_useState14[1];var onDelete=function onDelete(value){var filtered=baza.filter(function(data){return data.id!==value.id;});setBaza(filtered);};var onRestore=function onRestore(){setBaza(restore);};var onEdit=function onEdit(value){setSelected(value.id);setMain(value.main);setRuTitle(value.rutitle);setTitle(value.rutitle);};var dragStartHandler=function dragStartHandler(e,value){setCurrentCard(value);};var dragEndHandler=function dragEndHandler(e){e.target.style.background=\"white\";};var dragOverHandler=function dragOverHandler(e){e.preventDefault();e.target.style.background=\"lightgray\";};var dropHandler=function dropHandler(e,value){e.preventDefault();setBaza(baza.map(function(c){if(c.id===value.id){return _objectSpread(_objectSpread({},c),{},{order:currentCard.order});}if(c.id===currentCard.id){return _objectSpread(_objectSpread({},c),{},{order:value.order});}return c;}));e.target.style.background=\"white\";};var sortCards=function sortCards(a,b){if(a.order<b.order){return 1;}else{return-1;}};var onSave=function onSave(){var newData=baza.map(function(value){return value.id===selected?_objectSpread(_objectSpread({},value),{},{title:title,rutitle:rutitle,main:main,selected:value.id}):value;});setBaza(newData);setSelected(null);};return/*#__PURE__*/_jsx(Container,{children:baza.length!==0?baza.sort(sortCards).map(function(value){return/*#__PURE__*/_jsx(Wrapper,{onDragStart:function onDragStart(e){return dragStartHandler(e,value);},onDragLeave:function onDragLeave(e){return dragEndHandler(e);},onDragEnd:function onDragEnd(e){return dragEndHandler(e);},onDragOver:function onDragOver(e){return dragOverHandler(e);},onDrop:function onDrop(e){return dropHandler(e,value);},draggable:true,children:/*#__PURE__*/_jsxs(Dates,{children:[/*#__PURE__*/_jsx(Title,{left:\"true\",children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setTitle(e.target.value);},type:\"text\",value:title}):value.title+\" (uz)\"}),/*#__PURE__*/_jsx(Title,{children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setRuTitle(e.target.value);},type:\"text\",value:rutitle}):value.rutitle+\" (ru)\"}),/*#__PURE__*/_jsx(Title,{children:selected===value.id?/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setMain(e.target.value);},type:\"text\",value:main}):value.main}),/*#__PURE__*/_jsxs(Action,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return onDelete(value);},children:/*#__PURE__*/_jsx(Delete,{})}),selected===value.id?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"div\",{onClick:onSave,children:/*#__PURE__*/_jsx(Save,{})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setSelected(null);},children:/*#__PURE__*/_jsx(Cancel,{})})]}):/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return onEdit(value);},children:/*#__PURE__*/_jsx(Edit,{})})]})]})},value.id);}):/*#__PURE__*/_jsx(ButtonAll,{onClick:onRestore,children:/*#__PURE__*/_jsx(RestoreButton,{children:/*#__PURE__*/_jsx(Restore,{className:\"btn-pill\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(RestoreIcon,{src:restoreIcon}),\"Restore\"]})})})})});};export default DND;","map":{"version":3,"sources":["/home/ahrorbek/Videos/ffmeal/src/components/Kategoriya/DND/index.jsx"],"names":["React","useState","Container","Dates","Wrapper","Title","Action","ButtonAll","RestoreButton","Restore","RestoreIcon","Input","data","Delete","Edit","Cancel","Save","DND","baza","setBaza","restore","main","setMain","rutitle","setRuTitle","title","setTitle","selected","setSelected","currentCard","setCurrentCard","onDelete","value","filtered","filter","id","onRestore","onEdit","dragStartHandler","e","dragEndHandler","target","style","background","dragOverHandler","preventDefault","dropHandler","map","c","order","sortCards","a","b","onSave","newData","length","sort","display","restoreIcon"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Container,\n  Dates,\n  Wrapper,\n  Title,\n  Action,\n  ButtonAll,\n  RestoreButton,\n  Restore,\n  RestoreIcon,\n  Input,\n} from \"./style\";\nimport { data } from \"../../../mock/kategoriya\";\nimport Delete from \"../../Generic/Delete\";\nimport Edit from \"../../Generic/Edit\";\nimport Cancel from \"../../Generic/Cancel\";\nimport restoreIcon from \"../../../assets/icon/restoreIcon.svg\";\nimport Save from \"../../Generic/Save\";\n\nexport const DND = () => {\n  const [baza, setBaza] = useState(data);\n  const [restore] = useState(data);\n  const [main, setMain] = useState(\"\");\n  const [rutitle, setRuTitle] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [selected, setSelected] = useState(null);\n  const [currentCard, setCurrentCard] = useState(null);\n\n  const onDelete = (value) => {\n    const filtered = baza.filter((data) => data.id !== value.id);\n    setBaza(filtered);\n  };\n  const onRestore = () => {\n    setBaza(restore);\n  };\n  const onEdit = (value) => {\n    setSelected(value.id);\n    setMain(value.main);\n    setRuTitle(value.rutitle);\n    setTitle(value.rutitle);\n  };\n  const dragStartHandler = (e, value) => {\n    setCurrentCard(value);\n  };\n  const dragEndHandler = (e) => {\n    e.target.style.background = \"white\";\n  };\n  const dragOverHandler = (e) => {\n    e.preventDefault();\n    e.target.style.background = \"lightgray\";\n  };\n  const dropHandler = (e, value) => {\n    e.preventDefault();\n    setBaza(\n      baza.map((c) => {\n        if (c.id === value.id) {\n          return { ...c, order: currentCard.order };\n        }\n        if (c.id === currentCard.id) {\n          return { ...c, order: value.order };\n        }\n        return c;\n      })\n    );\n    e.target.style.background = \"white\";\n  };\n  const sortCards = (a, b) => {\n    if (a.order < b.order) {\n      return 1;\n    } else {\n      return -1;\n    }\n  };\n  const onSave = () => {\n    let newData = baza.map((value) =>\n      value.id === selected\n        ? {\n            ...value,\n            title: title,\n            rutitle: rutitle,\n            main: main,\n            selected: value.id,\n          }\n        : value\n    );\n    setBaza(newData);\n    setSelected(null);\n  };\n  return (\n    <Container>\n      {baza.length !== 0 ? (\n        baza.sort(sortCards).map((value) => (\n          <Wrapper\n            onDragStart={(e) => dragStartHandler(e, value)}\n            onDragLeave={(e) => dragEndHandler(e)}\n            onDragEnd={(e) => dragEndHandler(e)}\n            onDragOver={(e) => dragOverHandler(e)}\n            onDrop={(e) => dropHandler(e, value)}\n            draggable={true}\n            key={value.id}\n          >\n            <Dates>\n              <Title left=\"true\">\n                {selected === value.id ? (\n                  <Input\n                    onChange={(e) => setTitle(e.target.value)}\n                    type=\"text\"\n                    value={title}\n                  />\n                ) : (\n                  value.title + \" (uz)\"\n                )}\n              </Title>\n              <Title>\n                {selected === value.id ? (\n                  <Input\n                    onChange={(e) => setRuTitle(e.target.value)}\n                    type=\"text\"\n                    value={rutitle}\n                  />\n                ) : (\n                  value.rutitle + \" (ru)\"\n                )}\n              </Title>\n              <Title>\n                {selected === value.id ? (\n                  <Input\n                    onChange={(e) => setMain(e.target.value)}\n                    type=\"text\"\n                    value={main}\n                  />\n                ) : (\n                  value.main\n                )}\n              </Title>\n              <Action>\n                <div onClick={() => onDelete(value)}>\n                  <Delete />\n                </div>\n                {selected === value.id ? (\n                  <div style={{ display: \"flex\" }}>\n                    <div onClick={onSave}>\n                      <Save />\n                    </div>\n                    <div onClick={() => setSelected(null)}>\n                      <Cancel />\n                    </div>\n                  </div>\n                ) : (\n                  <div onClick={() => onEdit(value)}>\n                    <Edit />\n                  </div>\n                )}\n              </Action>\n            </Dates>\n          </Wrapper>\n        ))\n      ) : (\n        <ButtonAll onClick={onRestore}>\n          <RestoreButton>\n            <Restore className=\"btn-pill\">\n              <span>\n                <RestoreIcon src={restoreIcon} />\n                Restore\n              </span>\n            </Restore>\n          </RestoreButton>\n        </ButtonAll>\n      )}\n    </Container>\n  );\n};\nexport default DND;\n"]},"metadata":{},"sourceType":"module"}